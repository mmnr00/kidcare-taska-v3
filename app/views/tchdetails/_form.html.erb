<div class='row'>
  <div class='col-lg-8 col-12'>
    <%= form_for(@tchdetail, :html => {multipart: true, class: "form-horizontal", role: "form"}) do |f| %>
        
        <div class="form-group"> <!-- name -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>NAME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :name, class: "form-control", placeholder: "YOUR FULL NAME AS PER IC", autofocus: true, required: true %>
            </div>
          </div>
        </div>
        <% k = 1 %>
        <div class="form-group"> <!-- IC -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>I/C NO</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-4">
              <%= f.text_field :ic_1, maxlength: 6 ,class: "form-control", autofocus: true, required: true %>
            </div> <strong>-</strong>
            <div class="col-sm-2 col-3">
             <%= f.text_field :ic_2, maxlength: 2, class: "form-control", placeholder: "", autofocus: true, required: true %>
            </div> <strong>-</strong>
            <div class="col-sm-3 col-4">
              <%= f.text_field :ic_3, maxlength: 4, class: "form-control", placeholder: "", autofocus: true, required: true %>
            </div>         
          </div>
        </div>

        <!-- GENDER -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <i class="fas fa-caret-down"></i><strong> GENDER</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :gender, options_for_select(["MALE",
                                                        "FEMALE"],
                                                        selected: @tchdetail.gender),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <!-- DOB -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>DATE OF BIRTH</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.date_select :dob, 
                                {order:[:day, :month, :year],
                                prompt: { day: 'DAY', month: 'MONTH', year: 'YEAR' },
                                start_year: 1950,
                                selected: @tchdetail.dob}, 
                                {required: true} %>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- PHONE-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>PHONE NUMBER</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-3">
             <%= f.text_field  :phone_1, maxlength: 3, class: "form-control", autofocus: true, required: true %><font size="2"> Area </font> 
            </div>
            -
            <div class="col-sm-3 col-5">
              <%= f.text_field  :phone_2, maxlength: 8, class: "form-control", autofocus: true, required: true %><font size="2"> Phone Number </font> 
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- MARITAL-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>MARITAL STATUS</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :marital, options_for_select(["Married", 
                                                        "Single",
                                                        "Others"],
                                                        selected: @tchdetail.marital),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- CATEGORY-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>CATEGORY</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :category, options_for_select(["Childcare Provider", 
                                                        "Owner", 
                                                        "Supervisor",
                                                        "Principal",
                                                        "Others"],
                                                        selected: @tchdetail.category),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- ADDRESS-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>CORRESPONDENCE ADDRESS</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
             <%= f.text_field :address_1, class: "form-control", autofocus: true, required: true %> <font size="2"> &nbsp </font>
            </div>
            <div class="col-sm-8 col-12">
             <%= f.text_field :address_2, class: "form-control", autofocus: true %> <font size="2"> &nbsp </font>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-6">
             <%= f.text_field :city, class: "form-control", autofocus: true, required: true %> <font size="2"> City </font>
            </div>
            <div class="col-sm-3 col-5">
             <%= f.text_field :states, class: "form-control", autofocus: true, required: true %> <font size="2"> States </font>
            </div>
            <div class="col-sm-2 col-4">
             <%= f.number_field :postcode, class: "form-control", autofocus: true, required: true %> <font size="2"> Postcode </font>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- HIGHEST EDUCATION-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>EDUCATION LEVEL</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :education, options_for_select(["PHD", 
                                                        "Master", 
                                                        "Degree",
                                                        "Diploma",
                                                        "STPM",
                                                        "SPM/SPMV/MCE/O-Level",
                                                        "Sijil Kemahiran",
                                                        "Others"
                                                        ], 
                                                        selected: @tchdetail.education), 
              {include_blank: "Please Select"}, {required: true} %>
              <%= f.hidden_field :teacher_id, value: params[:teacher_id] %>
            </div>
          </div>
        </div>

        <!-- START PHOTO UPLOAD -->
        <!-- DEPOSIT PAYMENT RECEIPT -->
        <% m = 0 %> <!-- Stop loop at 1 -->
        <% if (@college.present? && @college.owners.where(id: 8).present?) || @tchdetail.fotos.where(foto_name: "DEPOSIT PAYMENT RECEIPT").present? %>
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>DEPOSIT PAYMENT RECEIPT</strong>
            </div>
          </div>
          <div class="row">
          <div class="col-sm-8 col-5">
          <% image = @tchdetail.fotos.where(foto_name: "DEPOSIT PAYMENT RECEIPT").first %>
          <% if image.present? %>
            <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
              <div class="row">
              <div class="col-sm-8 col-5">
                <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
              </div>
              </div>  
          <% else %>
            <%= f.fields_for :fotos do |h| %>
              <% break if m==1 %>
                <div class="row">
                  <div class="col-sm-8 col-8">
                    <%= h.hidden_field :foto_name, value: "DEPOSIT PAYMENT RECEIPT" %>
                    <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                  </div>
                </div>
                <% m = 1 %>
              <% end %>
          <% end %>
          </div>
          </div>
        </div><% end %>
        <!-- IC FRONT -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>IC FRONT</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "IC FRONT").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "IC FRONT" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
        <% end %>
        </div>
        </div>
      </div>

       <!-- IC BACK -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>IC BACK</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "IC BACK").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "IC BACK" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
        <% end %>
        </div>
        </div>
      </div>

      <!-- PROFILE PIC -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>PROFILE PIC</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "PROFILE PIC").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "PROFILE PIC" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
          <% end %>
        </div>
        </div>
      </div>


      <% if params[:anis] == "true" %> <!-- START ANIS -->
        <!-- HOUSEHOLD INCOME-->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <i class="fas fa-caret-down"></i><strong> MONTHLY HOUSEHOLD INCOME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :income, options_for_select(["RM10,001 and above", 
                                                        "RM5,001 to RM10,000", 
                                                        "RM5,000 and below"],
                                                        selected: @tchdetail.income),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>
        <!-- EMAIL -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>EMAIL</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.email_field :email, required: true %>
            </div>
          </div>
        </div>
        <!-- TASKA DETAILS -->
        <div class="form-group"> <!-- taska name -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>INSTITUTION NAME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :ts_name, class: "form-control",required: true, autofocus: true %>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- taska owner name -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>INSTITUTION OWNER'S NAME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :ts_owner_name, class: "form-control", autofocus: true %>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- Taska Owner PHONE-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>INSTITUTION OWNER'S NAME PHONE NO</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-3">
             <%= f.text_field  :ts_phone_1, maxlength: 3, class: "form-control", autofocus: true %><font size="2"> Area </font> 
            </div>
            -
            <div class="col-sm-3 col-5">
              <%= f.text_field  :ts_phone_2, maxlength: 8, class: "form-control", autofocus: true %><font size="2"> Phone Number </font> 
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- TASKA ADDRESS-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>INSTITUTION ADDRESS</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
             <%= f.text_field :ts_address_1, class: "form-control", autofocus: true %> <font size="2"> Address Line 1 </font>
            </div>
            <div class="col-sm-8 col-12">
             <%= f.text_field :ts_address_2, class: "form-control", autofocus: true %> <font size="2"> Address Line 2 </font>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-6">
             <%= f.text_field :ts_city, class: "form-control", autofocus: true %> <font size="2"> City </font>
            </div>
            <div class="col-sm-3 col-5">
             <%= f.text_field :ts_states, class: "form-control", autofocus: true %> <font size="2"> States </font>
            </div>
            <div class="col-sm-2 col-4">
             <%= f.number_field :ts_postcode, class: "form-control", autofocus: true %> <font size="2"> Postcode </font>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- POST -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>INSTITUTION TYPE</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :ts_tp, options_for_select(["TASKA",
                                                      "TADIKA",
                                                      "KEMAS",
                                                      "PPDK",
                                                      "PPKI",
                                                      "PERPADUAN",
                                                      "NGO",
                                                      "COLLEGE",
                                                      "OTHERS"
                                                        ], 
                                                        selected: @tchdetail.ts_tp), 
              {include_blank: "Please Select"}, {required: true} %>              
            </div>
          </div>
        </div>

        <!-- SSM/SURAT AKUAN KERJA -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>SSM/SURAT AKUAN KERJA</strong>
            </div>
          </div>
          <div class="row">
          <div class="col-sm-8 col-5">
          <% image = @tchdetail.fotos.where(foto_name: "SSM1").first %>
          <% if image.present? %>
            <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
              <div class="row">
              <div class="col-sm-8 col-5">
                <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
              </div>
              </div>  
          <% else %>
            <%= f.fields_for :fotos do |h| %>
                <div class="row">
                  <div class="col-sm-8 col-8">
                    <%= h.hidden_field :foto_name, value: "SSM1" %>
                    <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png, application/pdf' %>
                  </div>
                </div>
              <% end %>
          <% end %>
          </div>
          </div>
          <font size="2"> Sijil SSM untuk pemilik institusi atau surat tawaran bekerja untuk pekerja  </font>
        </div>

        <div class="form-group">
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>NO OF OKU CHILDREN AT INSTITUTION</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.number_field :biloku, class: "form-control", autofocus: true, value: @tchdetail.biloku %>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- DUN -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>DUN</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :dun, options_for_select($sel_dun, 
                                                    selected: @tchdetail.dun), 
              {include_blank: "Please Select"}, {required: true} %>
              <%= f.hidden_field :teacher_id, value: params[:teacher_id] %>
            </div>
          </div>
        </div>

        
        <div class="form-group"> <!-- JKM -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>NO PERAKUAN JKM/JPN</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :jkm, class: "form-control", placeholder: "", autofocus: true, required: true %>
            </div>
          </div>
        </div>

        <!-- DOB -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>JKM/JPN EXPIRY DATE</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.date_select :expjkm, 
                                {order:[:day, :month, :year],
                                prompt: { day: 'DAY', month: 'MONTH', year: 'YEAR' },
                                start_year: (Time.now - 2.year).year,
                                selected: @tchdetail.expjkm}, 
                                {required: true} %>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- POST -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>POST IN TASKA</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :post, options_for_select(["OWNER",
                                                      "SUPERVISOR/MANAGER",
                                                      "CHILDCARE PROVIDER"
                                                        ], 
                                                        selected: @tchdetail.post), 
              {include_blank: "Please Select"}, {required: true} %>              
            </div>
          </div>
        </div>

        <!-- OPEN LEARNING CERT (ASAS AUTISME) -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>OPEN LEARNING CERT (ASAS AUTISME)</strong>
            </div>
          </div>
          <div class="row">
          <div class="col-sm-8 col-5">
          <% image = @tchdetail.fotos.where(foto_name: "OPLN").first %>
          <% if image.present? %>
            <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
              <div class="row">
              <div class="col-sm-8 col-5">
                <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
              </div>
              </div>  
          <% else %>
            <%= f.fields_for :fotos do |h| %>
                <div class="row">
                  <div class="col-sm-8 col-8">
                    <%= h.hidden_field :foto_name, value: "OPLN" %>
                    <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png, application/pdf' %>
                  </div>
                </div>
              <% end %>
          <% end %>
          </div>
          </div>
        </div>

        <!-- OPEN LEARNING CERT (INTERVENSI AWAL) -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>OPEN LEARNING CERT (INTERVENSI AWAL)</strong>
            </div>
          </div>
          <div class="row">
          <div class="col-sm-8 col-5">
          <% image = @tchdetail.fotos.where(foto_name: "OPLN1").first %>
          <% if image.present? %>
            <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
              <div class="row">
              <div class="col-sm-8 col-5">
                <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
              </div>
              </div>  
          <% else %>
            <%= f.fields_for :fotos do |h| %>
                <div class="row">
                  <div class="col-sm-8 col-8">
                    <%= h.hidden_field :foto_name, value: "OPLN1" %>
                    <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png, application/pdf' %>
                  </div>
                </div>
              <% end %>
          <% end %>
          </div>
          </div>
        </div>

        <!-- PERAKUAN JKM/JPN -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>PERAKUAN JKM/JPN</strong>
            </div>
          </div>
          <div class="row">
          <div class="col-sm-8 col-5">
          <% image = @tchdetail.fotos.where(foto_name: "CRTJ").first %>
          <% if image.present? %>
            <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
              <div class="row">
              <div class="col-sm-8 col-5">
                <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
              </div>
              </div>  
          <% else %>
            <%= f.fields_for :fotos do |h| %>
                <div class="row">
                  <div class="col-sm-8 col-8">
                    <%= h.hidden_field :foto_name, value: "CRTJ" %>
                    <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png, application/pdf' %>
                  </div>
                </div>
              <% end %>
          <% end %>
          </div>
          </div>
        </div>

        <div class="form-group"> <!-- POST -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>PERAKUAN PEMOHON (KLIK JIKA BERSETUJU)</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.check_box :akun, checked: @tchdetail.akun %>&nbsp&nbsp
              <i>Saya bersetuju yang PJKK yang dinyatakan diatas dan juga saya berada di <b>NEGERI SELANGOR</b> </i>           
            </div>
          </div>
        </div>


        

        <%= f.hidden_field :teacher_id, value: params[:teacher_id] %>
        <%= f.hidden_field :anis, value: params[:anis] %>
        
        <%
        if $anis2.include?(params[:id].to_i) || $anis2f.include?(params[:id].to_i)
          tp="an2"
        else
          tp="an1"
        end
        %>
          <%= f.hidden_field :tp, value: tp %>
      <% end %>
      <!-- END ANIS -->
      <%= f.hidden_field :college_id, value: params[:id] %>
        
     
      <!-- END ANIS -->

      <div class="form-group">
        <div class="row">
          <div class="col-sm-offset-2 col-sm-10 col-4">
            <%= f.submit :"UPDATE PROFILE",  class: 'btn btn-primary btn-lg' %>
          </div>
        </div>
      </div>

    <% end %>
      
  </div>
</div>